{{ define "main" }}
<h1>Teachers</h1>

{{ range .Pages }}
<div>
    <h2><a href="{{ .RelPermalink }}">{{ .Title }}</a></h2>
    {{ with .Params.subjects }}
    <p>Subject: <a href="/subjects/{{ . | urlize }}">{{ . }}</a></p>
    {{ end }}
    <p>{{ .Content }}</p>
</div>
{{ end }}

<div>
    <h2>Browse by Subject</h2>
    <ul>
    {{ range $key, $taxonomy := .Site.Taxonomies.subjects }}
        <li><a href="/subjects/{{ $key | urlize }}">{{ $key }}</a> ({{ len $taxonomy }} teachers)</li>
    {{ end }}
    </ul>
</div>
{{ end }}
